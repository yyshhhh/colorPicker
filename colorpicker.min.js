function colorPicker(e){function o(t){"number"==typeof t.h&&(this.h=t.h,this.s=t.s,this.v=t.v),"number"==typeof t.r&&(this.r=t.r,this.g=t.g,this.b=t.b),"string"==typeof t.hex&&(this.hex=t.hex)}function n(t){document.getElementById("h").value=parseInt(t.h),document.getElementById("s").value=parseInt(100*t.s),document.getElementById("v").value=parseInt(100*t.v),document.getElementById("r").value=t.r,document.getElementById("g").value=t.g,document.getElementById("b").value=t.b,document.getElementById("hex").value=t.hex;var e=new o({h:t.h,s:1,v:1});e.hsv2rgb(),e.rgb2hex(),l.style.backgroundColor="#"+e.hex,y.style.backgroundColor="#"+t.hex,m.style.top=(360-t.h)/360*slider.offsetHeight-m.offsetHeight/2+"px",u.style.left=t.s*l.offsetWidth-u.offsetWidth/2+"px",u.style.top=(1-t.v)*l.offsetHeight-u.offsetHeight/2+"px"}function s(t){return window.event&&void 0!==window.event.contentOverflow?{x:window.event.offsetX,y:window.event.offsetY}:void 0!==t.offsetX&&void 0!==t.offsetY?{x:t.offsetX,y:t.offsetY}:void 0}function i(t,e,o){var n=!1;I.addHandler(e,"mousedown",function(t){t=t||window.event,(n=!0)&&o(t)}),I.addHandler(e,"mouseup",function(t){t=t||window.event,n=!1}),I.addHandler(e,"mouseout",function(t){t=t||window.event,n=!1}),I.addHandler(e,"mousemove",function(t){t=t||window.event,n&&o(t)})}var d=document.getElementById(e),a=['<div id="cont">','<div id="pickers">','<div id="picker">','<svg  xmlns="http://www.w3.org/2000/svg" width="300px" height="300px" version="1.1">',"<defs>",'<linearGradient id="gradient-black" x1="0%" y1="100%" x2="0%" y2="0%">','<stop offset="0%" stop-color="#000000" stop-opacity="1"></stop>','<stop offset="100%" stop-color="#ffffff" stop-opacity="0"></stop>',"</linearGradient>",'<linearGradient id="gradient-white" x1="0%" y1="100%" x2="100%" y2="100%">','<stop offset="0%" stop-color="#ffffff" stop-opacity="1"></stop>','<stop offset="100%" stop-color="#ffffff" stop-opacity="0"></stop>',"</linearGradient>","</defs>",'<rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-white)"></rect>','<rect x="0" y="0" width="100%" height="100%" fill="url(#gradient-black)"></rect>',"</svg>","</div>",'<div id="picker-indicator"></div>',"</div>",'<div id="sliders">','<div id="slider">','<svg xmlns="http://www.w3.org/2000/svg" width="30px" height="300px" version="1.1">',"<defs>",'<linearGradient id="gradient-hsv" x1="0%" y1="100%" x2="0%" y2="0%">','<stop offset="0%" stop-color="#ff0000" stop-opacity="1"></stop>','<stop offset="8%" stop-color="#ff7f00" stop-opacity="1"></stop>','<stop offset="17%" stop-color="#ffff00" stop-opacity="1"></stop>','<stop offset="25%" stop-color="#80ff00" stop-opacity="1"></stop>','<stop offset="33%" stop-color="#00ff00" stop-opacity="1"></stop>','<stop offset="42%" stop-color="#00ff80" stop-opacity="1"></stop>','<stop offset="50%" stop-color="#00ffff" stop-opacity="1"></stop>','<stop offset="58%" stop-color="#0080ff" stop-opacity="1"></stop>','<stop offset="67%" stop-color="#0000ff" stop-opacity="1"></stop>','<stop offset="75%" stop-color="#8000ff" stop-opacity="1"></stop>','<stop offset="83%" stop-color="#ff00ff" stop-opacity="1"></stop>','<stop offset="92%" stop-color="#ff007f" stop-opacity="1"></stop>','<stop offset="100%" stop-color="#ff0000" stop-opacity="1"></stop>',"</linearGradient>","</defs>",'<rect width="30px" height="300px" fill="url(#gradient-hsv)"></rect>',"</svg>","</div>",'<div id="slider-indicator"></div>',"</div>",'<div id="numbers">','<label><span>H</span><input type="" name="" id="h" maxLength="3"> 度</label>','<label><span>S</span><input type="" name="" id="s" maxLength="3"> %</label>','<label><span>B</span><input type="" name="" id="v" maxLength="3"> %</label>','<label><span>R</span><input type="" name="" id="r" maxLength="3"></label>','<label><span>G</span><input type="" name="" id="g" maxLength="3"></label>','<label><span>B</span><input type="" name="" id="b" maxLength="3"></label>','<label><span>#</span><input type="" name="" id="hex" maxLength="6"><button id="copyText">复制</button></label>',"</div>",'<div id="currentColor"></div>',"</div>"].join("");d.innerHTML=a;var l=(document.getElementById("cont"),document.getElementById("picker")),c=(document.getElementById("slider"),document.getElementById("pickers")),m=(document.getElementById("sliders"),document.getElementById("slider-indicator")),u=document.getElementById("picker-indicator"),y=document.getElementById("currentColor");o.prototype={constructor:o,hsv2rgb:function(){v=this.v,h=Math.floor(this.h/60)%6,f=this.h/60-h,p=this.v*(1-this.s),q=this.v*(1-f*this.s),t=this.v*(1-(1-f)*this.s),R=[v,q,p,p,t,v][h],G=[t,v,v,q,p,p][h],B=[p,p,t,v,v,q][h],r=Math.round(255*R),g=Math.round(255*G),b=Math.round(255*B),this.r=r,this.g=g,this.b=b},rgb2hsv:function(){var t,e,o,n=this.r/255,s=this.b/255,i=this.g/255;o=Math.max(n,i,s),min=Math.min(n,i,s),e=0==o?0:(o-min)/o,o==min?t=0:o==n&&i>=s?t=60*(i-s)/(o-min):o==n&&i<s?t=60*(i-s)/(o-min)+360:o==i?t=60*(s-n)/(o-min)+120:o==s&&(t=60*(n-i)/(o-min)+240),this.h=t,this.s=e,this.v=o},rgb2hex:function(){var t,e,o;t=this.r>15?this.r.toString(16):"0"+this.r.toString(16),e=this.g>15?this.g.toString(16):"0"+this.g.toString(16),o=this.b>15?this.b.toString(16):"0"+this.b.toString(16),this.hex=t+e+o},hex2rgb:function(){var t,e,o;t=this.hex.slice(0,2),this.r=parseInt(t,16),e=this.hex.slice(2,4),this.g=parseInt(e,16),o=this.hex.slice(4),this.b=parseInt(o,16)}};var x=new o({h:56,s:1,v:1});x.hsv2rgb(),x.rgb2hex(),n(x);var I={addHandler:function(t,e,o){t.addEventListener?t.addEventListener(e,o,!1):t.attachEvent?t.attachEvent("on"+e,o):t["on"+e]=o},removeHandler:function(t,e,o){t.removeEventListener?t.removeEventListener(e,o,!1):t.detachEvent?t.detachEvent("on"+e,o):t["on"+e]=null}};i(x,sliders,function(t){return function(e){e=e||window.event;var i=s(e);t.h=360*(1-i.y/sliders.offsetHeight),t.hsv2rgb(),t.rgb2hex(),n(t);var r=new o({h:t.h,s:1,v:1});r.hsv2rgb(),r.rgb2hex(),l.style.backgroundColor="#"+r.hex,m.style.top=i.y-m.offsetHeight/2+"px"}}(x)),i(x,c,function(t){return function(e){e=e||window.event;var o=s(e),i=c.offsetWidth,r=c.offsetHeight;t.s=o.x/i,t.v=(r-o.y)/r,t.hsv2rgb(),t.rgb2hex(),n(t),u.style.top=o.y-u.offsetHeight/2+"px",u.style.left=o.x-u.offsetWidth/2+"px"}}(x)),I.addHandler(document.getElementById("numbers"),"change",function(t){t=t||window.event;var e=event.target||event.srcElement;e==document.getElementById("h")?(x.h=parseInt(document.getElementById("h").value),x.h<=360?(x.hsv2rgb(),x.rgb2hex(),n(x)):alert("请输入0~360之间的数值")):e==document.getElementById("s")?(x.s=Number(document.getElementById("s").value/100),x.s<=1?(x.hsv2rgb(),x.rgb2hex(),n(x)):alert("请输入0~100之间的数值")):e==document.getElementById("v")?(x.v=Number(document.getElementById("v").value/100),x.v<=1?(x.hsv2rgb(),x.rgb2hex(),n(x)):alert("请输入0~100之间的数值")):e==document.getElementById("r")?(x.r=parseInt(document.getElementById("r").value),x.r<=255?(x.rgb2hsv(),x.rgb2hex(),n(x)):alert("请输入0~255之间的数值")):e==document.getElementById("g")?(x.g=parseInt(document.getElementById("g").value),x.g<=255?(x.rgb2hsv(),x.rgb2hex(),n(x)):alert("请输入0~255之间的数值")):e==document.getElementById("b")?(x.b=parseInt(document.getElementById("b").value),x.b<=255?(x.rgb2hsv(),x.rgb2hex(),n(x)):alert("请输入0~255之间的数值")):e==document.getElementById("hex")&&(x.hex=document.getElementById("hex").value,parseInt(x.hex,16)>=0&&parseInt(x.hex,16)<=parseInt("ffffff",16)?(x.hex2rgb(),x.rgb2hsv(),n(x)):(document.getElementById("hex").value=x.hex,alert("请输入000000~ffffff之间的数值")))}),function(){var t=document.getElementById("copyText");I.addHandler(t,"click",function(t){document.getElementById("hex").select(),document.execCommand("Copy")})}()}